<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/common-admin :: admin_head}"></th:block>
    <title>Crawling Logs - SwimColor Admin</title>
    <style>
        .status-success { color: #28a745; font-weight: bold; }
        .status-failure { color: #dc3545; font-weight: bold; }
        .error-text { max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; cursor: pointer; }
    </style>
</head>
<body>
<div th:replace="~{fragments/common-admin :: admin_navbar}"></div>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>ğŸš€ í¬ë¡¤ë§ ì‹¤í–‰ ë¡œê·¸</h2>
        <button class="btn btn-outline-secondary btn-sm" onclick="location.reload()">ìƒˆë¡œê³ ì¹¨</button>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <table class="table table-hover">
                <thead class="table-light">
                <tr>
                    <th>ID</th>
                    <th>ë¶„ë¥˜</th>
                    <th>ìƒíƒœ</th>
                    <th>ìˆ˜ì§‘ ê°œìˆ˜</th>
                    <th>ì†Œìš” ì‹œê°„</th>
                    <th>ì‹¤í–‰ ì¼ì‹œ</th>
                    <th>ì—ëŸ¬ ë©”ì‹œì§€</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="log : ${logs}">
                    <td th:text="${log.id}">1</td>
                    <td>
                        <span class="badge bg-info text-dark" th:text="${log.itemType}">SWIMSUIT</span>
                    </td>
                    <td>
                        <span th:class="${log.status.name() == 'SUCCESS' ? 'status-success' : 'status-failure'}"
                              th:text="${log.status}">SUCCESS</span>
                    </td>
                    <td><span th:text="${log.totalCount}">0</span>ê°œ</td>
                    <td><span th:text="${log.executionTime}">0</span>ms</td>
<!--                    <td th:text="${#temporals.format(log.crawledAt, 'yyyy-MM-dd HH:mm:ss')}">2025-12-31</td>-->
                    <td th:text="${log.crawledAt}">2025-12-31</td>
                    <td>
                        <div class="error-text" th:if="${log.errorMessage}"
                             th:title="${log.errorMessage}" th:text="${log.errorMessage}">-</div>
                        <span th:unless="${log.errorMessage}">-</span>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(logs)}">
                    <td colspan="7" class="text-center py-5 text-muted">ìµœê·¼ ì‹¤í–‰ëœ í¬ë¡¤ë§ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // ì—ëŸ¬ ë©”ì‹œì§€ í´ë¦­ ì‹œ ì „ì²´ ë‚´ìš© ë³´ì—¬ì£¼ëŠ” ê°„ë‹¨í•œ ì´ë²¤íŠ¸
    $(document).on('click', '.error-text', function() {
        alert($(this).attr('title'));
    });
</script>

</body>
</html>