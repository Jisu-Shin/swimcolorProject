<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:fragment="common_head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/style.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<header th:fragment="common_header" class="header">
    <div class="header-container">
        <div class="header-left">
            <button class="hamburger" id="hamburger" aria-label="ë©”ë‰´ ì—´ê¸°" aria-controls="sidebar" aria-expanded="false">
                <i class="bi bi-three-dots"></i>
            </button>
            <div class="logo"><a th:href="@{/}" >ğŸŠ SwimColor</a></div>
        </div>
        <div class="search-bar" role="search" aria-label="ì‚¬ì´íŠ¸ ê²€ìƒ‰">
            <input type="text" placeholder="ìˆ˜ì˜ë³µ, ìˆ˜ëª¨ ê²€ìƒ‰..." aria-label="ê²€ìƒ‰ì–´ ì…ë ¥">
            <button class="search-btn" type="button" aria-label="ê²€ìƒ‰">ğŸ”</button>
        </div>
    </div>

    <!-- Off-canvas sidebar (ì ‘ê·¼ì„± ì†ì„± í¬í•¨) -->
    <aside id="sidebar" class="sidebar" aria-hidden="true" aria-labelledby="sidebarLabel" role="dialog">
        <button class="close-btn" aria-label="ì‚¬ì´ë“œë°” ë‹«ê¸°">âœ•</button>

        <nav aria-label="ì£¼ìš” ë©”ë‰´">
            <h3 id="sidebarLabel">ë©”ë‰´</h3>
            <a th:href="@{/}" class="sidebar-link">í™ˆ</a>
            <a th:href="@{/swimsuits}" class="sidebar-link">ìˆ˜ì˜ë³µ ì¶”ì²œ</a>
            <a th:href="@{/about}" class="sidebar-link">ì†Œê°œ</a>
            <a th:href="@{/contact}" class="sidebar-link">ë¬¸ì˜</a>
            <!-- í•„ìš”í•œ ë©”ë‰´ë¥¼ ì—¬ê¸°ì— ì¶”ê°€í•˜ì„¸ìš” -->
        </nav>
    </aside>

    <!-- Overlay: sidebar í™œì„±í™” ì‹œ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸° -->
    <div id="sidebarOverlay" class="sidebar-overlay" tabindex="-1" aria-hidden="true"></div>
</header>

<footer th:fragment="common_footer" class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h4>ğŸŠ SwimColor</h4>
            <p class="footer-slogan">ìˆ˜ì˜ë³µê³¼ ìˆ˜ëª¨ì˜ ì™„ë²½í•œ ì»¬ëŸ¬ ë§¤ì¹­,<br>ë‹¹ì‹ ì˜ ìˆ˜ì˜ì— ìƒ‰ì„ ë”í•˜ì„¸ìš”.</p>
        </div>
        <div class="footer-section">
            <h4>ğŸ’Œ ë¬¸ì˜</h4>
            <p>ğŸ“§ shinjs1997@gmail.com</p>
            <div class="social-icons">
                <i class="bi bi-instagram"></i> swimcolor.style
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 SwimColor. All rights reserved.</p>
    </div>

    <script th:src="@{/script.js}"></script>

    <!-- ì‚¬ì´ë“œë°” í† ê¸€ ìŠ¤í¬ë¦½íŠ¸ (ê°„ë‹¨í•œ ì ‘ê·¼ì„± ì²˜ë¦¬ í¬í•¨) -->
    <script>
        (function () {
          const hamburger = document.getElementById('hamburger');
          const sidebar = document.getElementById('sidebar');
          const overlay = document.getElementById('sidebarOverlay');
          const closeBtn = sidebar.querySelector('.close-btn');

          const focusableSelector = 'a, button, input, [tabindex]:not([tabindex="-1"])';

          function openSidebar() {
            sidebar.classList.add('open');
            overlay.classList.add('active');
            sidebar.setAttribute('aria-hidden', 'false');
            hamburger.setAttribute('aria-expanded', 'true');
            overlay.setAttribute('aria-hidden', 'false');

            // í¬ì»¤ìŠ¤ ì´ë™: ì‚¬ì´ë“œë°”ì˜ ì²« í¬ì»¤ìŠ¤ ê°€ëŠ¥í•œ ìš”ì†Œë¡œ
            const first = sidebar.querySelector(focusableSelector);
            if (first) first.focus();

            // í‚¤ë³´ë“œë¡œ Esc ëˆ„ë¥´ë©´ ë‹«ê¸°
            document.addEventListener('keydown', onKeyDown);
          }

          function closeSidebar() {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            sidebar.setAttribute('aria-hidden', 'true');
            hamburger.setAttribute('aria-expanded', 'false');
            overlay.setAttribute('aria-hidden', 'true');

            // í¬ì»¤ìŠ¤ ì›ë˜ ë²„íŠ¼ìœ¼ë¡œ ë³µì›
            hamburger.focus();

            document.removeEventListener('keydown', onKeyDown);
          }

          function onKeyDown(e) {
            if (e.key === 'Escape') {
              closeSidebar();
            }
          }

          hamburger.addEventListener('click', function () {
            const isOpen = sidebar.classList.contains('open');
            if (isOpen) closeSidebar(); else openSidebar();
          });

          closeBtn.addEventListener('click', closeSidebar);
          overlay.addEventListener('click', closeSidebar);

          // ì‚¬ì´ë“œë°” ë‚´ ë§í¬ í´ë¦­ ì‹œ ë‹«ê¸° (ì„ íƒì )
          sidebar.querySelectorAll('a').forEach(a => {
            a.addEventListener('click', closeSidebar);
          });
        })();
    </script>
</footer>

</html>